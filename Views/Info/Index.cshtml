@model dacon_exam.Models.Info


@{
    ViewData["Title"] = "Home Page";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    
</head>
<title>Document</title>

<style>
          body {
                    color: #566787;
                                background: #f5f5f5;
                                font-family: 'Varela Round', sans-serif;
                                font-size: 13px;
                      }
                      .table-wrapper {
                    background: #fff;
                    padding: 20px 25px;
                    margin: 30px 0;
                                border-radius: 3px;
                    box-shadow: 0 1px 1px rgba(0,0,0,.05);
                }
                      .table-title {        
                                padding-bottom: 15px;
                                background: #435d7d;
                                color: #fff;
                                padding: 16px 30px;
                                margin: -20px -25px 10px;
                                border-radius: 3px 3px 0 0;
                }
                .table-title h2 {
                                margin: 5px 0 0;
                                font-size: 24px;
                      }
                      .table-title .btn-group {
                                float: right;
                      }
                      .table-title .btn {
                                color: #fff;
                                float: right;
                                font-size: 13px;
                                border: none;
                                min-width: 50px;
                                border-radius: 2px;
                                border: none;
                                outline: none !important;
                                margin-left: 10px;
                      }
                      .table-title .btn i {
                                float: left;
                                font-size: 21px;
                                margin-right: 5px;
                      }
                      .table-title .btn span {
                                float: left;
                                margin-top: 2px;
                      }
                table.table tr th, table.table tr td {
                    border-color: #e9e9e9;
                                padding: 12px;
                                vertical-align: middle;
                }
                     
             
              
                     
</style>
<body>
  
  <br><br><br><br><br><br>
          <div class="container">
                    <div class="table-wrapper">
                      <div class="table-title">
                        <div class="row">
                          
                          <div class="col-sm-6">
                            <h2>PIPING</h2>
                          </div>
                          <div class="col-sm-6">
                            <a asp-action="Create" asp-controller="Info" class="btn btn-success ">Add Piping</a>
                          </div>
                        </div>
                      </div>
                      <table class="table">
                          
                            <thead class="text-muted">
                                <tr>
                                    <th class="text-left" width="200">Line number</th>
                                    <th class="text-left" width="150">location</th>
                                    <th class="text-left" width="250">from</th>
                                    <th class="text-left" width="250">to</th>
                                    <th class="text-left" width="100">pipsize</th>
                                    <th class="text-left" width="150">service</th>
                                    <th class="text-left" width="300">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                            
                                @foreach (var item in ViewBag.Info)
                                {   
                                    <tr>    
                                      
                                            <td>@item.line_number</td>
                                            <td>@item.location</td>
                                            <td>@item.from</td>
                                            <td>@item.to</td>
                                            <td>@item.pipe_size</td>
                                            <td>@item.service</td>
                                            <td>
                                          
                                            <button class="btn btn-md btn-warning" onclick="GetData('@item.Info_id');">Edit</button>
                                             <a asp-action="Index" asp-controller="Cml" class="btn btn-info" asp-route-id="@item.Info_id">
                                                Detail
                                            </a>  @* <i class="fa fa-trash-o" style="font-size:24px">*@ 
                                            <a asp-action="Delete" asp-controller="Info"  asp-route-id="@item.Info_id" class="btn btn-md btn-danger" onclick="return confirm('Are you sure to delete this record?')">
                                              Delete
                                            </a>
                                                                
                                            <td>
                                    </tr>
                                }
                            

                            </tbody>
                        </table>
                        </div>
                    </div>
                  
                  </div>
                </div>
             </div>
           </div>
          </div>

  <form asp-action="EditData" asp-area="Info" method="post">
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">PIPING INFOMATION</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
        
          <div class="modal-body">
                          <div class="row">
                                
                                
                                <input type="hidden" name="Info_id" id="Info_id">

                            
                                <div class="col-md-6">
                                  <label>Line number:</label>
                                    <input asp-for="line_number" type="text" id="line_number"
                                    class="form-control" placeholder="line number" required>
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Line number:</label>
                                    <input asp-for="location" type="text" id="location" class="form-control" 
                                    name="location" placeholder="location" required>
                                </div>

                                <div class="col-md-6">
                                  <label>From:</label>
                                    <input  asp-for="from" type="text" id="from" name="from"
                                    class="form-control" placeholder="from">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>To:</label>   
                                    <input asp-for="to" type="text" id="to" class="form-control"
                                    name="to" placeholder="to">  
                                </div>

                                <div class="col-md-6">
                                  <label>Drawing number:</label>   
                                  <input asp-for="drawing_number" type="text" id="drawing_number" name="drawing_number" 
                                  class="form-control" placeholder="drawing number">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Service:</label>   
                                  <input asp-for="service" type="text" id="service" class="form-control"
                                  name="service" placeholder="service">
                                </div>

                                <div class="col-md-6">
                                  <label>Material:</label>  
                                  <input asp-for="material" type="text" class="form-control" placeholder="Material">
                                </div>
                                                        
                                <div class="col-md-6 mb-2">
                                  <label>Inservice date:</label> 
                                  <div class="input-group date" id="datepicker" data-provide="datepicker" data-date-format="yyyy/mm/dd">
                                      <input asp-for="inservice_date" type="text" class="form-control" placeholder="Inservice date">
                                              <span class="input-group-append">
                                              <span class="input-group-text bg-white d-block"><i class="fa fa-calendar"></i>
                                              </span>
                                              </span>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                  <label>Pipe size:</label> 
                                      <input asp-for="pipe_size" type="number" step="any"
                                      class="form-control" placeholder="pipe size">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Original thickness:</label> 
                                  <input asp-for="original_thickness" type="number" step ="any" id="original_thickness" class="form-control"
                                  name="original_thickness" placeholder="original thickness">
                                </div>
                                                        
                                <div class="col-md-6">
                                  <label>Stress:</label>
                                  <input asp-for="stress" type="number" id="stress" name="stress"class="form-control" placeholder="stress">

                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Joint efficiency:</label>
                                    <input asp-for="joint_efficiency" type="number" id="joint_efficiency" class="form-control"
                                    name="joint_efficiency" placeholder="joint efficiency">
                                </div>

                                <div class="col-md-6">
                                  <label>Ca:</label>
                                    <input asp-for="ca" type="number" id="ca" name="ca"
                                    class="form-control" placeholder="ca">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Design life:</label>
                                  <input asp-for="design_life" type="number" id="design_life" class="form-control"
                                      name="design_life" placeholder="design life">
                                </div>

                                <div class="col-md-6">
                                  <label>Design pressure:</label>
                                  <input asp-for="design_pressure" type="number" id="design_pressure" class="form-control"
                                      name="design_pressure" placeholder="design pressure">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Operating pressure:</label>
                                  <input asp-for="operating_pressure" type="number" id="operating_pressure" name="operating_pressure"
                                  class="form-control" placeholder="operating pressure">
                                </div>

                                <div class="col-md-6">
                                  <label>Design temperature:</label>
                                  <input asp-for="design_temperature" type="number" id="design_temperature" class="form-control"
                                  name="design_temperature" placeholder="design temperature">
                                </div>

                                <div class="col-md-6 mb-2">
                                  <label>Operating temperature:</label>
                                  <input asp-for="operating_temperature" type="text" id="operating_temperature" name="operating_temperature" class="form-control" placeholder="operating temperature">
                                </div>
                                
                                
                                
                                                        
                                <div class="form-group">
                                  <div asp-validation-summary="All" class="text-danger"></div>
                                </div>

                    
                                <center>
                                    <button type="submit" class="btn btn-primary">เพิ่มข้อมูล</button>
                                        <a asp-action="Index" asp-controller="Info" class="btn btn-secondary">ยกเลิก</a>
                                  </center>                        
                              </div>
                          </div>
                  
                </div>
          </div>
        </div>
      </div>
   </div>
   
</form>
</body>

<script>
      $(function() {
            $('#datepicker').datepicker();
      });

      function GetData(v) {

        $.ajax(
            {
                url: '@Url.Action("GetData", "Info")',

                dataType: "json",

                data: JSON.stringify(
                    {
                        "Info_id" : v

                    }),


                contentType: "application/json; charset=utf-8",

                type: "POST",

                success: function (response) {

                  $("#Info_id").val(response["info_id"]);
                  $("#line_number").val(response["line_number"]);
                  $("#location").val(response["location"]);
                  $("#from").val(response["from"]);
                  $("#to").val(response["to"]);
                  $("#drawing_number").val(response["drawing_number"]);
                  $("#service").val(response["service"]);
                  $("#material").val(response["material"]);
                  $("#inservice_date").val(response["inservice_date"]);
                  $("#pipe_size").val(response["pipe_size"]);
                  $("#original_thickness").val(response["original_thickness"]);
                  $("#stress").val(response["stress"]);
                  $("#joint_efficiency").val(response["joint_efficiency"]);
                  $("#ca").val(response["ca"]);
                  $("#design_life").val(response["design_life"]);
                  $("#design_pressure").val(response["design_pressure"]);
                  $("#design_temperature").val(response["design_temperature"]);
                  $("#operating_pressure").val(response["operating_pressure"]);
                  $("#operating_temperature").val(response["operating_temperature"]);

                  $('#exampleModal').modal('show');
                },

                error: function (data) {


                }


            })



     


    }
    </script>
</html>

 